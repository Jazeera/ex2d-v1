// ======================================================================================
// File         : exUIPanelEditor.cs
// Author       : Wu Jie 
// Last Change  : 11/03/2011 | 17:53:14 PM | Thursday,November
// Description  : 
// ======================================================================================

///////////////////////////////////////////////////////////////////////////////
// usings
///////////////////////////////////////////////////////////////////////////////

using UnityEngine;
using UnityEditor;
using System.Collections;

///////////////////////////////////////////////////////////////////////////////
// public
///////////////////////////////////////////////////////////////////////////////

[CustomEditor(typeof(exUIPanel))]
public class exUIPanelEditor : exUIElementEditor {

    ///////////////////////////////////////////////////////////////////////////////
    // properties
    ///////////////////////////////////////////////////////////////////////////////

    private exUIPanel editPlane;

    ///////////////////////////////////////////////////////////////////////////////
    // functions
    ///////////////////////////////////////////////////////////////////////////////

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    override protected void OnEnable () {
        base.OnEnable();
        if ( target != editPlane ) {
            editPlane = target as exUIPanel;
        }
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

	override public void OnInspectorGUI () {

        // ======================================================== 
        // Base GUI 
        // ======================================================== 

        base.OnInspectorGUI();
        GUILayout.Space(20);

        // ======================================================== 
        // check dirty 
        // ======================================================== 

        if ( EditorApplication.isPlaying == false )
            editPlane.Sync();

        if ( GUI.changed )
            EditorUtility.SetDirty (editPlane);
    }

    // ------------------------------------------------------------------ 
    // Desc: 
    // ------------------------------------------------------------------ 

    override protected void OnSceneGUI () {
        base.OnSceneGUI();

        // ======================================================== 
        // check dirty 
        // ======================================================== 

        if ( EditorApplication.isPlaying == false )
            editPlane.Sync();

        if ( GUI.changed )
            EditorUtility.SetDirty (editPlane);
    }
}
